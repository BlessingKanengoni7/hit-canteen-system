<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Security Verification | HIT Canteen</title>

    <!-- ðŸ” ACCESS GUARD -->
    <script>
        if (sessionStorage.getItem("SECURITY_AUTH") !== "true") {
            window.location.replace("security-login.html");
        }
    </script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Inter:wght@400;500&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- Styles -->
    <link rel="stylesheet" href="security-verify.css">
</head>

<body>

<header class="header verify-header neutral" id="verifyHeader">
    <div class="logo-container">
        <h1>HARARE INSTITUTE OF TECHNOLOGY</h1>
        <span>Canteen Digital Ticketing System</span>
    </div>

    <div class="top-right">
        <button id="logoutBtn" class="login-btn">
            <i class="fas fa-sign-out-alt"></i> Logout
        </button>
    </div>
</header>

<section class="scanner-wrapper">

    <div class="scanner-grid">

        <!-- CAMERA -->
        <div class="scanner-camera">
            <h3><i class="fas fa-camera"></i> QR Scanner</h3>
            <div id="qr-video"></div>

            <button id="scanBtn" class="scan-btn">
                <i class="fas fa-qrcode"></i> START SCAN
            </button>
        </div>

        <!-- RESULTS -->
        <div class="scanner-results">
            <h3>Verification Results</h3>

            <div id="resultStatus" class="status neutral">
                Awaiting Scan...
            </div>

            <ul id="resultDetails">
                <li>Student: â€”</li>
                <li>Reg No: â€”</li>
                <li>Meal: â€”</li>
                <li>Time: â€”</li>
            </ul>

            <div class="result-actions">
                <button id="manualBtn">Manual Entry</button>
            </div>
        </div>

    </div>

</section>

<footer class="security-footer">
    <span>ðŸ”’ HIT Secure Verification System</span>
    <span class="gold">â€¢ Integrity â€¢ Accountability â€¢ Access Control</span>
</footer>

<script src="https://unpkg.com/html5-qrcode"></script>
<script src="security-verify.js"></script>

<script>
    // Clean logout
    document.getElementById("logoutBtn").addEventListener("click", () => {
        sessionStorage.removeItem("SECURITY_AUTH");
        sessionStorage.removeItem("SECURITY_ID");
        window.location.href = "security-login.html";
    });
</script>

</body>
</html>
